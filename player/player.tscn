[gd_scene load_steps=15 format=3 uid="uid://lj17m112ehpt"]

[ext_resource type="Script" uid="uid://c08p2djcihe2o" path="res://player/player_common.gd" id="1_4flbx"]
[ext_resource type="Script" uid="uid://ck2pawb0jmb51" path="res://player/dash_dir_indicator.gd" id="2_8t03j"]
[ext_resource type="Script" uid="uid://cjt6uuke0wuwe" path="res://player/state_machine.gd" id="2_rkbax"]
[ext_resource type="Script" uid="uid://da6voysdihkup" path="res://player/grounded.gd" id="3_yw30f"]
[ext_resource type="Script" uid="uid://utgixymvt17f" path="res://player/bouncing.gd" id="4_g6k8r"]
[ext_resource type="Script" uid="uid://bn2330o4e0s0p" path="res://player/falling.gd" id="5_g6k8r"]
[ext_resource type="Script" uid="uid://c5uw1oo1cucet" path="res://player/dashing.gd" id="5_qjkh3"]
[ext_resource type="Script" uid="uid://ptnh2uj4vicw" path="res://player/state_display.gd" id="7_boad6"]
[ext_resource type="Script" uid="uid://d0dcgwjybsqd6" path="res://common/hitbox.gd" id="8_hg6s5"]
[ext_resource type="Script" uid="uid://pt8x4gqtpuhh" path="res://common/hurtbox.gd" id="8_rgyib"]

[sub_resource type="SphereMesh" id="SphereMesh_sh265"]

[sub_resource type="CircleShape2D" id="CircleShape2D_sh265"]
radius = 24.0

[sub_resource type="CircleShape2D" id="CircleShape2D_8t03j"]
radius = 40.7922

[sub_resource type="CircleShape2D" id="CircleShape2D_rgyib"]
radius = 16.0

[node name="Player" type="CharacterBody2D" node_paths=PackedStringArray("hang_timer", "offset_timer", "mesh", "state_machine", "bouncing_state", "falling_state", "dashing_state", "grounded_state")]
physics_interpolation_mode = 1
script = ExtResource("1_4flbx")
peak_time = 0.45
fall_time = 0.4
bounce_peak_y_mult = 0.75
dash_distance = 480.0
dash_time = 0.2
top_speed = 640.0
air_accel_mult = 0.25
air_decel_mult = 0.25
hang_timer = NodePath("HangTimer")
offset_timer = NodePath("OffsetTimer")
mesh = NodePath("Mesh")
state_machine = NodePath("StateMachine")
bouncing_state = NodePath("StateMachine/Bouncing")
falling_state = NodePath("StateMachine/Falling")
dashing_state = NodePath("StateMachine/Dashing")
grounded_state = NodePath("StateMachine/Grounded")

[node name="Mesh" type="MeshInstance2D" parent="."]
physics_interpolation_mode = 1
position = Vector2(0, -24)
scale = Vector2(48, 48)
mesh = SubResource("SphereMesh_sh265")

[node name="Collider" type="CollisionShape2D" parent="."]
position = Vector2(0, -24)
shape = SubResource("CircleShape2D_sh265")

[node name="OffsetTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 0.25
one_shot = true

[node name="HangTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 0.05
one_shot = true

[node name="DashAttackTimer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="DashDirIndicator" type="Line2D" parent="." node_paths=PackedStringArray("mesh")]
visible = false
top_level = true
points = PackedVector2Array(0, 0, 0, 0)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("2_8t03j")
mesh = NodePath("../Mesh")
max_dist = 192.0

[node name="StateMachine" type="Node2D" parent="." node_paths=PackedStringArray("default_state")]
script = ExtResource("2_rkbax")
default_state = NodePath("Falling")
metadata/_custom_type_script = "uid://cjt6uuke0wuwe"

[node name="Grounded" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("falling_state", "bouncing_state")]
script = ExtResource("3_yw30f")
falling_state = NodePath("../Falling")
bouncing_state = NodePath("../Bouncing")
metadata/_custom_type_script = "uid://d3mvxnoga10c0"

[node name="Bouncing" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("falling_state", "grounded_state")]
script = ExtResource("4_g6k8r")
falling_state = NodePath("../Falling")
grounded_state = NodePath("../Grounded")
metadata/_custom_type_script = "uid://d3mvxnoga10c0"

[node name="Falling" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("grounded_state", "bouncing_state", "hang_timer")]
script = ExtResource("5_g6k8r")
grounded_state = NodePath("../Grounded")
bouncing_state = NodePath("../Bouncing")
hang_timer = NodePath("../../HangTimer")
metadata/_custom_type_script = "uid://d3mvxnoga10c0"

[node name="Dashing" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("grounded_state", "falling_state", "dash_indicator")]
script = ExtResource("5_qjkh3")
grounded_state = NodePath("../Grounded")
falling_state = NodePath("../Falling")
dash_indicator = NodePath("../../DashDirIndicator")
metadata/_custom_type_script = "uid://d3mvxnoga10c0"

[node name="StateLabel" type="Label" parent="." node_paths=PackedStringArray("state_machine")]
offset_left = -524.5
offset_top = -152.0
offset_right = 524.5
offset_bottom = -64.0
theme_override_font_sizes/font_size = 64
text = "{0}"
horizontal_alignment = 1
script = ExtResource("7_boad6")
state_machine = NodePath("../StateMachine")

[node name="DashHitbox" type="Area2D" parent="."]
script = ExtResource("8_hg6s5")
type = 1
detect_hits = true
metadata/_custom_type_script = "uid://d0dcgwjybsqd6"

[node name="Collider" type="CollisionShape2D" parent="DashHitbox"]
position = Vector2(0, -24)
shape = SubResource("CircleShape2D_8t03j")
debug_color = Color(0.7, 0.35, 0, 0.419608)

[node name="Hurtbox" type="Area2D" parent="."]
script = ExtResource("8_rgyib")
type = 1
total_i_frames = 1.0
metadata/_custom_type_script = "uid://pt8x4gqtpuhh"

[node name="Collider" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0, -24)
shape = SubResource("CircleShape2D_rgyib")
debug_color = Color(1, 0.16, 0.16, 0.419608)

[connection signal="timeout" from="OffsetTimer" to="." method="_on_offset_timeout"]
